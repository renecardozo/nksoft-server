import{Q as g,q as G,u as ie,r,j as e,C as ce,a as P,b as f,d as H,e as M,f as L,g as v,h as S,i as _,a0 as de,l as x,a1 as pe,a4 as k,o as A,B as le,D as me,E as V,F as E,H as ue,I as T,n as c}from"./index-Caj9Gai4.js";var _e=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='440 240 272 240 272 72 240 72 240 240 72 240 72 272 240 272 240 440 272 440 272 272 440 272 440 240' class='ci-primary'/>"],b={PATH_API:"http://nksoft.tis.cs.umss.edu.bo",NVM_INC:"/Users/renecardozo/.nvm/versions/node/v18.18.0/include/node",MANPATH:"/Users/renecardozo/.nvm/versions/node/v18.18.0/share/man:/opt/homebrew/share/man:/usr/share/man:/usr/local/share/man:/Users/renecardozo/.nvm/versions/node/v18.18.0/share/man:/opt/homebrew/share/man::",TERM_PROGRAM:"vscode",NODE:"/Users/renecardozo/.nvm/versions/node/v18.18.0/bin/node",INIT_CWD:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui",NVM_CD_FLAGS:"-q",TERM:"xterm-256color",SHELL:"/bin/zsh",npm_config_metrics_registry:"https://registry.npmjs.org/",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/cm/9dv3lvt54z162scbfz77x_r80000gn/T/",npm_config_global_prefix:"/Users/renecardozo/.nvm/versions/node/v18.18.0",TERM_PROGRAM_VERSION:"1.90.0",ZDOTDIR:"/Users/renecardozo",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"1",npm_config_noproxy:"",npm_config_local_prefix:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui",ZSH:"/Users/renecardozo/.oh-my-zsh",NVM_DIR:"/Users/renecardozo/.nvm",USER:"renecardozo",LS_COLORS:"di=1;36:ln=35:so=32:pi=33:ex=31:bd=34;46:cd=34;43:su=30;41:sg=30;46:tw=30;42:ow=30;43",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/Users/renecardozo/.nvm/versions/node/v18.18.0/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.hTpKWX1t96/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/Users/renecardozo/.nvm/versions/node/v18.18.0/lib/node_modules/npm/bin/npm-cli.js",PAGER:"less",LSCOLORS:"Gxfxcxdxbxegedabagacad",PATH:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui/node_modules/.bin:/Users/renecardozo/Documents/TIS/patricia/projects/node_modules/.bin:/Users/renecardozo/Documents/TIS/patricia/node_modules/.bin:/Users/renecardozo/Documents/TIS/node_modules/.bin:/Users/renecardozo/Documents/node_modules/.bin:/Users/renecardozo/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/renecardozo/.nvm/versions/node/v18.18.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/opt/homebrew/opt/postgresql@12/bin:/opt/homebrew/opt/php@7.4/sbin:/opt/homebrew/opt/php@7.4/bin:/opt/homebrew/opt/mongodb-community@7.0/bin/:$/Users/renecardozo/.pyenv/versions/2.7.18/bin/python2.7:/Users/renecardozo/.pyenv/shims:/Users/renecardozo/.nvm/versions/node/v18.18.0/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/share/dotnet:~/.dotnet/tools:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/opt/homebrew/opt/postgresql@12/bin:/opt/homebrew/opt/php@7.4/sbin:/opt/homebrew/opt/php@7.4/bin:/opt/homebrew/opt/mongodb-community@7.0/bin/:$/Users/renecardozo/.pyenv/versions/2.7.18/bin/python2.7:/Users/renecardozo/.nvm/versions/node/v18.18.0/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/mysql-8.0.31-macos12-arm64/bin:/Applications/Visual Studio Code.app/Contents/Resources/app/bin:/usr/local/mysql-8.0.31-macos12-arm64/bin:/Applications/Visual Studio Code.app/Contents/Resources/app/bin",npm_package_json:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui/package.json",_:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui/node_modules/.bin/vite",npm_config_userconfig:"/Users/renecardozo/.npmrc",npm_config_init_module:"/Users/renecardozo/.npm-init.js",USER_ZDOTDIR:"/Users/renecardozo",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui",npm_lifecycle_event:"build",EDITOR:"vi",npm_package_name:"nksoft-ui",LANG:"en_US.UTF-8",npm_config_npm_version:"9.8.1",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",XPC_FLAGS:"0x0",npm_config_node_gyp:"/Users/renecardozo/.nvm/versions/node/v18.18.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"0.1.0",XPC_SERVICE_NAME:"0",VSCODE_INJECTION:"1",PYENV_SHELL:"zsh",SHLVL:"2",HOME:"/Users/renecardozo",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/renecardozo/.npm",LESS:"-R",LOGNAME:"renecardozo",npm_lifecycle_script:"PATH_API=http://nksoft.tis.cs.umss.edu.bo vite build",VSCODE_GIT_IPC_HANDLE:"/var/folders/cm/9dv3lvt54z162scbfz77x_r80000gn/T/vscode-git-b2750e5af1.sock",NVM_BIN:"/Users/renecardozo/.nvm/versions/node/v18.18.0/bin",npm_config_user_agent:"npm/9.8.1 node/v18.18.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",npm_node_execpath:"/Users/renecardozo/.nvm/versions/node/v18.18.0/bin/node",npm_config_prefix:"/Users/renecardozo/.nvm/versions/node/v18.18.0",COLORTERM:"truecolor",NODE_ENV:"production",PATH_API_TEST:"http://nksoft.tis.cs.umss.edu.bo"};const be=async()=>{try{return(await g.get(`${b.PATH_API}/api/unidades`)).data.map(i=>({...i,nombreDepartamento:i.departamento?i.departamento.nombreDepartamentos:"Ninguno"})).sort((i,p)=>i.nombreUnidades.localeCompare(p.nombreUnidades))}catch(n){throw console.error("Error al obtener las unidades:",n),n}},he=async n=>{try{const t=await g.post(`${b.PATH_API}/api/unidades`,n);return await G(n,"Created",0),t.data.id}catch{throw new Error("Error al crear la unidad")}},ve=async()=>(await g.get(`${b.PATH_API}/api/periodos/horaApertura`)).data,Se=async()=>(await g.get(`${b.PATH_API}/api/periodos/horaCierre`)).data,ge=async n=>{try{const t=await fetch(`${b.PATH_API}/api/aulas/registrar`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return await G(n,"Created",0),await t.json()}catch(t){throw new Error(t.message)}};var Ce={PATH_API:"http://nksoft.tis.cs.umss.edu.bo",NVM_INC:"/Users/renecardozo/.nvm/versions/node/v18.18.0/include/node",MANPATH:"/Users/renecardozo/.nvm/versions/node/v18.18.0/share/man:/opt/homebrew/share/man:/usr/share/man:/usr/local/share/man:/Users/renecardozo/.nvm/versions/node/v18.18.0/share/man:/opt/homebrew/share/man::",TERM_PROGRAM:"vscode",NODE:"/Users/renecardozo/.nvm/versions/node/v18.18.0/bin/node",INIT_CWD:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui",NVM_CD_FLAGS:"-q",TERM:"xterm-256color",SHELL:"/bin/zsh",npm_config_metrics_registry:"https://registry.npmjs.org/",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/cm/9dv3lvt54z162scbfz77x_r80000gn/T/",npm_config_global_prefix:"/Users/renecardozo/.nvm/versions/node/v18.18.0",TERM_PROGRAM_VERSION:"1.90.0",ZDOTDIR:"/Users/renecardozo",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"1",npm_config_noproxy:"",npm_config_local_prefix:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui",ZSH:"/Users/renecardozo/.oh-my-zsh",NVM_DIR:"/Users/renecardozo/.nvm",USER:"renecardozo",LS_COLORS:"di=1;36:ln=35:so=32:pi=33:ex=31:bd=34;46:cd=34;43:su=30;41:sg=30;46:tw=30;42:ow=30;43",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/Users/renecardozo/.nvm/versions/node/v18.18.0/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.hTpKWX1t96/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/Users/renecardozo/.nvm/versions/node/v18.18.0/lib/node_modules/npm/bin/npm-cli.js",PAGER:"less",LSCOLORS:"Gxfxcxdxbxegedabagacad",PATH:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui/node_modules/.bin:/Users/renecardozo/Documents/TIS/patricia/projects/node_modules/.bin:/Users/renecardozo/Documents/TIS/patricia/node_modules/.bin:/Users/renecardozo/Documents/TIS/node_modules/.bin:/Users/renecardozo/Documents/node_modules/.bin:/Users/renecardozo/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/renecardozo/.nvm/versions/node/v18.18.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/opt/homebrew/opt/postgresql@12/bin:/opt/homebrew/opt/php@7.4/sbin:/opt/homebrew/opt/php@7.4/bin:/opt/homebrew/opt/mongodb-community@7.0/bin/:$/Users/renecardozo/.pyenv/versions/2.7.18/bin/python2.7:/Users/renecardozo/.pyenv/shims:/Users/renecardozo/.nvm/versions/node/v18.18.0/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/share/dotnet:~/.dotnet/tools:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/opt/homebrew/opt/postgresql@12/bin:/opt/homebrew/opt/php@7.4/sbin:/opt/homebrew/opt/php@7.4/bin:/opt/homebrew/opt/mongodb-community@7.0/bin/:$/Users/renecardozo/.pyenv/versions/2.7.18/bin/python2.7:/Users/renecardozo/.nvm/versions/node/v18.18.0/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/mysql-8.0.31-macos12-arm64/bin:/Applications/Visual Studio Code.app/Contents/Resources/app/bin:/usr/local/mysql-8.0.31-macos12-arm64/bin:/Applications/Visual Studio Code.app/Contents/Resources/app/bin",npm_package_json:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui/package.json",_:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui/node_modules/.bin/vite",npm_config_userconfig:"/Users/renecardozo/.npmrc",npm_config_init_module:"/Users/renecardozo/.npm-init.js",USER_ZDOTDIR:"/Users/renecardozo",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui",npm_lifecycle_event:"build",EDITOR:"vi",npm_package_name:"nksoft-ui",LANG:"en_US.UTF-8",npm_config_npm_version:"9.8.1",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",XPC_FLAGS:"0x0",npm_config_node_gyp:"/Users/renecardozo/.nvm/versions/node/v18.18.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"0.1.0",XPC_SERVICE_NAME:"0",VSCODE_INJECTION:"1",PYENV_SHELL:"zsh",SHLVL:"2",HOME:"/Users/renecardozo",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/renecardozo/.npm",LESS:"-R",LOGNAME:"renecardozo",npm_lifecycle_script:"PATH_API=http://nksoft.tis.cs.umss.edu.bo vite build",VSCODE_GIT_IPC_HANDLE:"/var/folders/cm/9dv3lvt54z162scbfz77x_r80000gn/T/vscode-git-b2750e5af1.sock",NVM_BIN:"/Users/renecardozo/.nvm/versions/node/v18.18.0/bin",npm_config_user_agent:"npm/9.8.1 node/v18.18.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",npm_node_execpath:"/Users/renecardozo/.nvm/versions/node/v18.18.0/bin/node",npm_config_prefix:"/Users/renecardozo/.nvm/versions/node/v18.18.0",COLORTERM:"truecolor",NODE_ENV:"production",PATH_API_TEST:"http://nksoft.tis.cs.umss.edu.bo"};const xe=()=>{ie();const[n,t]=r.useState(""),[d,i]=r.useState(""),[p,j]=r.useState("");r.useState([]);const[h,U]=r.useState(null),[y,F]=r.useState([]),[l,m]=r.useState([{nombreAulas:"",capacidadAulas:"",unidad_id:null}]),[W,B]=r.useState([]),[K,X]=r.useState([]),[$,I]=r.useState(!1),[q,w]=r.useState(!1),[Z,z]=r.useState(!1),[Y,D]=r.useState(!1),[J,R]=r.useState(!1),[Q,N]=r.useState(!1),[ee,O]=r.useState(!1);r.useEffect(()=>{(async()=>{try{const s=await fetch(`${Ce.PATH_API}/api/departamentos`,{method:"GET",headers:{"Content-Type":"application/json"}});if(s.ok){const a=await s.json();F(a)}else console.error("Error al obtener departamentos")}catch(s){console.error("Error de red:",s)}})()},[]),r.useEffect(()=>{(async()=>{try{const s=await ve(),a=await Se();B(s),X(a)}catch(s){console.error("Error al cargar las horas de apertura y cierre:",s)}})()},[]);const oe=async o=>{o.preventDefault();try{if(n.trim()===""){D(!0);return}if(d.trim()===""){R(!0);return}if(p.trim()===""){N(!0);return}if(p.trim()<=d.trim()){O(!0);return}if((await be()).find(u=>u.nombreUnidades===n)){w(!0);return}const C=await he({nombreUnidades:n,horaAperturaUnidades:d,horaCierreUnidades:p,departamento_id:h?h.id:null}),te=l.map(u=>({...u,unidad_id:C}));await Promise.all(te.map(async u=>{await ge(u)})),t(""),i(""),j(""),U(null),m([{nombreAulas:"",capacidadAulas:""}]),I(!0)}catch(s){z(!0),console.error("Error al registrar la unidad: "+s.message)}finally{setTimeout(()=>{I(!1),w(!1),z(!1),D(!1),R(!1),N(!1),O(!1)},3e3)}},se=()=>{m([...l,{nombreAulas:"",capacidadAulas:""}])},re=o=>{const s=[...l];s.splice(o,1),m(s)},ne=(o,s)=>{const a=[...l];a[o].nombreAulas=s,m(a)},ae=(o,s)=>{const a=[...l];a[o].capacidadAulas=s,m(a)};return e.jsx("div",{className:"container",children:e.jsxs(ce,{children:[e.jsxs(P,{className:"justify-content-center",children:[e.jsx(f,{md:6,children:e.jsx(H,{className:"mx-4",children:e.jsx(M,{className:"p-4",children:e.jsxs(L,{children:[e.jsx("h1",{children:"Registrar unidad nueva"}),e.jsxs(v,{className:"mb-3",children:[e.jsx(S,{children:e.jsx(_,{icon:de})}),e.jsx(x,{placeholder:"Nombre",autoComplete:"nombre",value:n,onChange:o=>t(o.target.value)})]}),e.jsxs(v,{className:"mb-3",children:[e.jsx(S,{children:e.jsx(_,{icon:pe})}),e.jsxs("select",{className:"form-select",value:h?h.id:"",onChange:o=>{const s=parseInt(o.target.value),a=s!==-1?y.find(C=>C.id===s):null;U(a)},children:[e.jsx("option",{value:-1,children:"Ninguno"}),y.sort((o,s)=>o.nombreDepartamentos.localeCompare(s.nombreDepartamentos)).map(o=>e.jsx("option",{value:o.id,children:o.nombreDepartamentos},o.id))]})]}),e.jsxs(v,{className:"mb-3",children:[e.jsx(S,{children:e.jsx(_,{icon:k})}),e.jsxs("select",{className:"form-select",value:d,onChange:o=>i(o.target.value),children:[e.jsx("option",{value:"",children:"Seleccionar hora de apertura"}),W.map((o,s)=>e.jsx("option",{value:o,children:o},s))]})]}),e.jsxs(v,{className:"mb-3",children:[e.jsx(S,{children:e.jsx(_,{icon:k})}),e.jsxs("select",{className:"form-select",value:p,onChange:o=>j(o.target.value),children:[e.jsx("option",{value:"",children:"Seleccionar hora de cierre"}),K.map((o,s)=>e.jsx("option",{value:o,children:o},s))]})]}),e.jsx("div",{className:"d-grid",children:e.jsx(A,{type:"button",color:"primary",onClick:o=>oe(o),children:"Registrar"})})]})})})}),e.jsx(f,{md:6,children:e.jsx(H,{className:"mx-4",children:e.jsx(M,{className:"p-4",children:e.jsxs(L,{children:[e.jsx("h1",{children:"Agregar aulas"}),e.jsxs(le,{striped:!0,children:[e.jsx(me,{children:e.jsxs(V,{children:[e.jsx(E,{children:"Nombre del Aula"}),e.jsx(E,{children:"Capacidad"}),e.jsx(E,{})]})}),e.jsx(ue,{children:l.map((o,s)=>e.jsxs(V,{children:[e.jsx(T,{children:e.jsx(x,{placeholder:`Nombre del aula ${s+1}`,autoComplete:"nombre",value:o.nombreAulas,onChange:a=>ne(s,a.target.value)})}),e.jsx(T,{children:e.jsx(x,{placeholder:`Capacidad del aula ${s+1}`,autoComplete:"capacidad",value:o.capacidadAulas,onChange:a=>ae(s,a.target.value)})}),e.jsx(T,{children:e.jsx(A,{color:"danger",onClick:()=>re(s),children:"Eliminar"})})]},s))})]}),e.jsx("div",{className:"d-grid mt-3",children:e.jsxs(A,{color:"primary",onClick:se,children:[e.jsx(_,{icon:_e}),"Agregar Aula"]})})]})})})})]}),e.jsx("br",{}),e.jsx(P,{className:"justify-content-center p-10",children:e.jsxs(f,{children:[$&&e.jsx(c,{color:"success",children:"Se ha registrado la unidad exitosamente"}),q&&e.jsx(c,{color:"warning",children:"El nombre de la unidad ya se encuentra registrado, por favor ingrese otro"}),Z&&e.jsx(c,{color:"danger",children:"Error al registrar la unidad"}),Y&&e.jsx(c,{color:"warning",children:"Por favor complete el nombre de la unidad."}),J&&e.jsx(c,{color:"warning",children:"Por favor seleccione una hora de apertura"}),Q&&e.jsx(c,{color:"warning",children:"Por favor seleccione una hora de Cierre"}),ee&&e.jsxs(c,{color:"warning",children:["La hora de cierre debe ser posterior la hora de apertura, por favor seleccione un horario válido"," "]})]})})]})})};export{xe as default};

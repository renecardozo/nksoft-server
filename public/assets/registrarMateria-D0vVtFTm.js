import{u as O,r as s,Y as M,j as e,C as P,a as k,b as L,d as G,e as H,f as F,g as u,h as b,i as _,l as g,a0 as v,a1 as V,a2 as h,o as B,q as K}from"./index-Caj9Gai4.js";/* empty css                         */import{a as X}from"./servicios-C8Qdb1pi.js";var q=["512 512","<rect width='288' height='32' x='184' y='80' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='288' height='32' x='184' y='240' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='288' height='32' x='184' y='400' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><polygon fill='var(--ci-primary-color, currentColor)' points='120 160 120 40 56 40 56 72 88 72 88 160 120 160' class='ci-primary'/><polygon fill='var(--ci-primary-color, currentColor)' points='56 262.111 56 312 136 312 136 280 91.777 280 136 257.889 136 192 56 192 56 224 104 224 104 238.111 56 262.111' class='ci-primary'/><polygon fill='var(--ci-primary-color, currentColor)' points='56 440 56 472 136 472 136 344 56 344 56 376 104 376 104 392 80 392 80 424 104 424 104 440 56 440' class='ci-primary'/>"],f={PATH_API:"http://nksoft.tis.cs.umss.edu.bo",NVM_INC:"/Users/renecardozo/.nvm/versions/node/v18.18.0/include/node",MANPATH:"/Users/renecardozo/.nvm/versions/node/v18.18.0/share/man:/opt/homebrew/share/man:/usr/share/man:/usr/local/share/man:/Users/renecardozo/.nvm/versions/node/v18.18.0/share/man:/opt/homebrew/share/man::",TERM_PROGRAM:"vscode",NODE:"/Users/renecardozo/.nvm/versions/node/v18.18.0/bin/node",INIT_CWD:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui",NVM_CD_FLAGS:"-q",TERM:"xterm-256color",SHELL:"/bin/zsh",npm_config_metrics_registry:"https://registry.npmjs.org/",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/cm/9dv3lvt54z162scbfz77x_r80000gn/T/",npm_config_global_prefix:"/Users/renecardozo/.nvm/versions/node/v18.18.0",TERM_PROGRAM_VERSION:"1.90.0",ZDOTDIR:"/Users/renecardozo",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"1",npm_config_noproxy:"",npm_config_local_prefix:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui",ZSH:"/Users/renecardozo/.oh-my-zsh",NVM_DIR:"/Users/renecardozo/.nvm",USER:"renecardozo",LS_COLORS:"di=1;36:ln=35:so=32:pi=33:ex=31:bd=34;46:cd=34;43:su=30;41:sg=30;46:tw=30;42:ow=30;43",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/Users/renecardozo/.nvm/versions/node/v18.18.0/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.hTpKWX1t96/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/Users/renecardozo/.nvm/versions/node/v18.18.0/lib/node_modules/npm/bin/npm-cli.js",PAGER:"less",LSCOLORS:"Gxfxcxdxbxegedabagacad",PATH:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui/node_modules/.bin:/Users/renecardozo/Documents/TIS/patricia/projects/node_modules/.bin:/Users/renecardozo/Documents/TIS/patricia/node_modules/.bin:/Users/renecardozo/Documents/TIS/node_modules/.bin:/Users/renecardozo/Documents/node_modules/.bin:/Users/renecardozo/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/renecardozo/.nvm/versions/node/v18.18.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/opt/homebrew/opt/postgresql@12/bin:/opt/homebrew/opt/php@7.4/sbin:/opt/homebrew/opt/php@7.4/bin:/opt/homebrew/opt/mongodb-community@7.0/bin/:$/Users/renecardozo/.pyenv/versions/2.7.18/bin/python2.7:/Users/renecardozo/.pyenv/shims:/Users/renecardozo/.nvm/versions/node/v18.18.0/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/share/dotnet:~/.dotnet/tools:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/opt/homebrew/opt/postgresql@12/bin:/opt/homebrew/opt/php@7.4/sbin:/opt/homebrew/opt/php@7.4/bin:/opt/homebrew/opt/mongodb-community@7.0/bin/:$/Users/renecardozo/.pyenv/versions/2.7.18/bin/python2.7:/Users/renecardozo/.nvm/versions/node/v18.18.0/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/mysql-8.0.31-macos12-arm64/bin:/Applications/Visual Studio Code.app/Contents/Resources/app/bin:/usr/local/mysql-8.0.31-macos12-arm64/bin:/Applications/Visual Studio Code.app/Contents/Resources/app/bin",npm_package_json:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui/package.json",_:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui/node_modules/.bin/vite",npm_config_userconfig:"/Users/renecardozo/.npmrc",npm_config_init_module:"/Users/renecardozo/.npm-init.js",USER_ZDOTDIR:"/Users/renecardozo",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui",npm_lifecycle_event:"build",EDITOR:"vi",npm_package_name:"nksoft-ui",LANG:"en_US.UTF-8",npm_config_npm_version:"9.8.1",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",XPC_FLAGS:"0x0",npm_config_node_gyp:"/Users/renecardozo/.nvm/versions/node/v18.18.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"0.1.0",XPC_SERVICE_NAME:"0",VSCODE_INJECTION:"1",PYENV_SHELL:"zsh",SHLVL:"2",HOME:"/Users/renecardozo",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/renecardozo/.npm",LESS:"-R",LOGNAME:"renecardozo",npm_lifecycle_script:"PATH_API=http://nksoft.tis.cs.umss.edu.bo vite build",VSCODE_GIT_IPC_HANDLE:"/var/folders/cm/9dv3lvt54z162scbfz77x_r80000gn/T/vscode-git-b2750e5af1.sock",NVM_BIN:"/Users/renecardozo/.nvm/versions/node/v18.18.0/bin",npm_config_user_agent:"npm/9.8.1 node/v18.18.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",npm_node_execpath:"/Users/renecardozo/.nvm/versions/node/v18.18.0/bin/node",npm_config_prefix:"/Users/renecardozo/.nvm/versions/node/v18.18.0",COLORTERM:"truecolor",NODE_ENV:"production",PATH_API_TEST:"http://nksoft.tis.cs.umss.edu.bo"};const Y=()=>{const C=O(),[t,S]=s.useState(null),[x,y]=s.useState([]),[i,E]=s.useState(""),[c,j]=s.useState(""),[d,T]=s.useState(""),[R,p]=s.useState(!1),[N,l]=s.useState(!1),[A,m]=s.useState(!1),[D,I]=s.useState(!1);M(),s.useEffect(()=>{(async()=>{try{const r=await fetch(`${f.PATH_API}/api/departamentos`,{method:"GET",headers:{"Content-Type":"application/json"}});if(r.ok){const n=await r.json();y(n)}else console.error("Error al obtener departamentos")}catch(r){console.error("Error de red:",r)}})()},[]);const z=async o=>{o.preventDefault();var r=!1;try{const a=await fetch(`${f.PATH_API}/api/materiasDuplicado`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({materia:d,grupo:c})});if(!a.ok)throw new Error("Error en la solicitud.");const w=await a.json();await K({materia:d,grupo:c},"Created",0),w.duplicados?r=!0:r=!1}catch(a){console.error("Error al verificar duplicados:",a)}var n,U=i.replace(/[^0-9]/g,"").length;if(i!=""&&d!=0&&c!=""&&t&&t.id)if(n=i,U==7){const a={id_materia:n,codigo:i,materia:d,grupo:c,departamento:t.nombreDepartamentos};r?(p(!1),l(!1),m(!0)):(await X(a),p(!1),l(!1),m(!1),I(!0),setTimeout(()=>{C("/administracion/agregar-materia")},1500))}else p(!1),m(!1),l(!0);else l(!1),m(!1),p(!0)};return e.jsx("div",{className:"container",children:e.jsx(P,{children:e.jsx(k,{className:"justify-content-center",children:e.jsx(L,{md:9,lg:7,xl:6,children:e.jsx(G,{className:"mx-4",children:e.jsx(H,{className:"p-4",children:e.jsxs(F,{children:[e.jsx("h1",{children:"Agregar Materia"}),e.jsx("p",{className:"text-body-secondary",children:"Registrar una Materia"}),e.jsxs(u,{className:"mb-3",children:[e.jsx(b,{children:e.jsx(_,{icon:q})}),e.jsx(g,{placeholder:"Codigo de Materia",autoComplete:"codigo",onChange:o=>E(o.target.value)})]}),e.jsxs(u,{className:"mb-3",children:[e.jsx(b,{children:e.jsx(_,{icon:v})}),e.jsx(g,{placeholder:"Nombre de Materia",autoComplete:"materia",onChange:o=>T(o.target.value)})]}),e.jsxs(u,{className:"mb-3",children:[e.jsx(b,{children:e.jsx(_,{icon:v})}),e.jsx(g,{placeholder:"Grupo",autoComplete:"grupo",onChange:o=>j(o.target.value)})]}),e.jsxs(u,{className:"mb-3",children:[e.jsx(b,{children:e.jsx(_,{icon:V})}),e.jsxs("select",{className:"form-select",value:t?t.id:"",onChange:o=>{const r=x.find(n=>n.id===parseInt(o.target.value));console.log("Departamento seleccionado:",r),S(r)},children:[e.jsx("option",{value:"",children:"Selecciona un departamento"}),x.map(o=>e.jsx("option",{value:o.id,children:o.nombreDepartamentos},o.id))]})]}),R&&e.jsx(h,{className:"d-block text-center font-weight-extrabold",style:{color:"red",backgroundColor:"#FFC4C4",padding:"5px",borderRadius:"5px",marginBottom:"15px",border:"1px solid red"},children:"Llenar todos los campos"}),N&&e.jsx(h,{className:"d-block text-center font-weight-extrabold",style:{color:"red",backgroundColor:"#FFC4C4",padding:"5px",borderRadius:"5px",marginBottom:"15px",border:"1px solid red"},children:"El código debe tener 7 digitos"}),A&&e.jsx(h,{className:"d-block text-center font-weight-extrabold",style:{color:"red",backgroundColor:"#FFC4C4",padding:"5px",borderRadius:"5px",marginBottom:"15px",border:"1px solid red"},children:"La materia y grupo ya esta registrado."}),D&&e.jsx(h,{className:"d-block text-center font-weight-extrabold",style:{color:"green",backgroundColor:"#C3FDE1",padding:"5px",borderRadius:"5px",marginBottom:"15px",border:"1px solid green"},children:"Materia registrada con éxito"}),e.jsx("div",{className:"d-grid",children:e.jsx(B,{color:"primary",onClick:o=>z(o),children:"Registrar"})})]})})})})})})})};export{Y as default};

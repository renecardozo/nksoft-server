import{r,j as e,o as c,B as N,D as S,E as h,F as d,H as E,I as V,i as M,W as t}from"./index-WtevhoQQ.js";import{C as P,a as R,b as D}from"./CToaster-B8Mu9yKV.js";import{C as Z}from"./CFormSelect-BqpKVJxX.js";import{C as A,a as l}from"./CPaginationItem-DruFk8jl.js";var F=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M96,472a23.82,23.82,0,0,0,23.579,24H392.421A23.82,23.82,0,0,0,416,472V152H96Zm32-288H384V464H128Z' class='ci-primary'/><rect width='32' height='200' x='168' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='240' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='312' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M328,88V40c0-13.458-9.488-24-21.6-24H205.6C193.488,16,184,26.542,184,40V88H64v32H448V88ZM216,48h80V88H216Z' class='ci-primary'/>"];function q(){const[p,x]=r.useState([]),[j,C]=r.useState(""),[y,f]=r.useState(null),v=r.useRef(),o=async()=>{const s=await t.get("api/backup");x(s.data)},b=async()=>{const s=await t.put("api/backup","");o(),console.log(s)},g=async a=>{let s={filename:a},u="api/backup";const{success:n,message:w}=await t.post(u,s);n&&f(I(w))},k=async a=>{let s={filename:a};const n=await t.post("api/backup-delete",s);o(),console.log(n)},B=a=>{C(a.target.value)},T=()=>{localStorage.setItem("interval",j)};let m=parseInt(localStorage.getItem("interval")),i=m||6048e5;const H=()=>{if(i===864e5)return"Diario";if(i===6048e5)return"Semanal";if(i===2629785600)return"Mensual"},I=a=>e.jsx(R,{autohide:!0,visible:!0,color:"success",children:e.jsx(D,{children:a})});return r.useEffect(()=>{o()},[]),e.jsxs("div",{className:"container",children:[e.jsx(P,{ref:v,push:y,placement:"bottom-end",style:{marginBottom:"50px"}}),e.jsxs("div",{className:"d-flex mb-5",children:[e.jsx("p",{className:"me-5",children:"Establecer tiempo de backups:"}),e.jsxs(Z,{size:"mb",style:{width:"20%"},"aria-label":"Large select example",onChange:B,children:[e.jsx("option",{children:H()}),e.jsx("option",{value:"86400000",children:"Diario"}),e.jsx("option",{value:"604800000",children:"Semanal"}),e.jsx("option",{value:"2629785600Â ",children:"Mensual"})]}),e.jsx(c,{className:"ms-2 me-5",color:"info",onClick:()=>T(),children:"Establecer"}),e.jsx(c,{className:"ms-5",color:"primary",onClick:()=>b(),children:"Generar Backup"})]}),e.jsxs(N,{children:[e.jsx(S,{children:e.jsxs(h,{children:[e.jsx(d,{className:"col-4",scope:"col",children:"Nombre"}),e.jsx(d,{className:"col-1",scope:"col",children:"Acciones"})]})}),e.jsx(E,{children:p&&p.map(a=>e.jsxs(h,{children:[e.jsx(d,{scope:"row",children:a.split(".")[0]}),e.jsxs(V,{children:[e.jsx(c,{className:"me-2",color:"primary",onClick:()=>g(a),children:"Restaurar"}),e.jsx(c,{color:"info",onClick:()=>k(a),children:e.jsx(M,{style:{color:"red"},icon:F})})]})]},a))})]}),e.jsxs(A,{align:"center","aria-label":"Page navigation example",children:[e.jsx(l,{disabled:!0,children:"Previous"}),e.jsx(l,{children:"1"}),e.jsx(l,{children:"2"}),e.jsx(l,{children:"3"}),e.jsx(l,{children:"Next"})]})]})}export{q as default};

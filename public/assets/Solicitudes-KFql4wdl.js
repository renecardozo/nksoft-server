import{r,_ as J,R as O,V as G,s as $,t as Q,P as L,Q as ee,q as oe,j as e,B as P,D as w,E as z,F as c,H,I as l,o as C,i as F,W as R}from"./index-Caj9Gai4.js";import{C as V}from"./CFormSelect-BvsJ3WuD.js";import{C as se,a as S}from"./CPaginationItem-BvgsEI-F.js";import{C as ae,a as ne,b as re,c as ie,d as ce}from"./CModalTitle-BdNy_a1w.js";var I=r.forwardRef(function(s,d){var a=s.children,A=s.className,E=s.feedback,N=s.feedbackInvalid,n=s.feedbackValid,T=s.floatingClassName,h=s.floatingLabel,b=s.id,m=s.invalid,v=s.label,x=s.plainText,_=s.text,f=s.tooltipFeedback,g=s.valid,p=J(s,["children","className","feedback","feedbackInvalid","feedbackValid","floatingClassName","floatingLabel","id","invalid","label","plainText","text","tooltipFeedback","valid"]);return O.createElement(G,{describedby:p["aria-describedby"],feedback:E,feedbackInvalid:N,feedbackValid:n,floatingClassName:T,floatingLabel:h,id:b,invalid:m,label:v,text:_,tooltipFeedback:f,valid:g},O.createElement("textarea",$({className:Q(x?"form-control-plaintext":"form-control",{"is-invalid":m,"is-valid":g},A),id:b},p,{ref:d}),a))});I.propTypes=$({className:L.string,id:L.string,plainText:L.bool},G.propTypes);I.displayName="CFormTextarea";var le=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M496,496H448.771L379.249,368H40a24.028,24.028,0,0,1-24-24V40A24.028,24.028,0,0,1,40,16H472a24.028,24.028,0,0,1,24,24ZM48,336H398.284L464,456.993V48H48Z' class='ci-primary'/>"],te=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M245.151,168a88,88,0,1,0,88,88A88.1,88.1,0,0,0,245.151,168Zm0,144a56,56,0,1,1,56-56A56.063,56.063,0,0,1,245.151,312Z' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M464.7,322.319l-31.77-26.153a193.081,193.081,0,0,0,0-80.332l31.77-26.153a19.941,19.941,0,0,0,4.606-25.439l-32.612-56.483a19.936,19.936,0,0,0-24.337-8.73l-38.561,14.447a192.038,192.038,0,0,0-69.54-40.192L297.49,32.713A19.936,19.936,0,0,0,277.762,16H212.54a19.937,19.937,0,0,0-19.728,16.712L186.05,73.284a192.03,192.03,0,0,0-69.54,40.192L77.945,99.027a19.937,19.937,0,0,0-24.334,8.731L21,164.245a19.94,19.94,0,0,0,4.61,25.438l31.767,26.151a193.081,193.081,0,0,0,0,80.332l-31.77,26.153A19.942,19.942,0,0,0,21,347.758l32.612,56.483a19.937,19.937,0,0,0,24.337,8.73l38.562-14.447a192.03,192.03,0,0,0,69.54,40.192l6.762,40.571A19.937,19.937,0,0,0,212.54,496h65.222a19.936,19.936,0,0,0,19.728-16.712l6.763-40.572a192.038,192.038,0,0,0,69.54-40.192l38.564,14.449a19.938,19.938,0,0,0,24.334-8.731L469.3,347.755A19.939,19.939,0,0,0,464.7,322.319Zm-50.636,57.12-48.109-18.024-7.285,7.334a159.955,159.955,0,0,1-72.625,41.973l-10,2.636L267.6,464h-44.89l-8.442-50.642-10-2.636a159.955,159.955,0,0,1-72.625-41.973l-7.285-7.334L76.241,379.439,53.8,340.562l39.629-32.624-2.7-9.973a160.9,160.9,0,0,1,0-83.93l2.7-9.972L53.8,171.439l22.446-38.878,48.109,18.024,7.285-7.334a159.955,159.955,0,0,1,72.625-41.973l10-2.636L222.706,48H267.6l8.442,50.642,10,2.636a159.955,159.955,0,0,1,72.625,41.973l7.285,7.334,48.109-18.024,22.447,38.877-39.629,32.625,2.7,9.972a160.9,160.9,0,0,1,0,83.93l-2.7,9.973,39.629,32.623Z' class='ci-primary'/>"],de={PATH_API:"http://nksoft.tis.cs.umss.edu.bo",NVM_INC:"/Users/renecardozo/.nvm/versions/node/v18.18.0/include/node",MANPATH:"/Users/renecardozo/.nvm/versions/node/v18.18.0/share/man:/opt/homebrew/share/man:/usr/share/man:/usr/local/share/man:/Users/renecardozo/.nvm/versions/node/v18.18.0/share/man:/opt/homebrew/share/man::",TERM_PROGRAM:"vscode",NODE:"/Users/renecardozo/.nvm/versions/node/v18.18.0/bin/node",INIT_CWD:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui",NVM_CD_FLAGS:"-q",TERM:"xterm-256color",SHELL:"/bin/zsh",npm_config_metrics_registry:"https://registry.npmjs.org/",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/cm/9dv3lvt54z162scbfz77x_r80000gn/T/",npm_config_global_prefix:"/Users/renecardozo/.nvm/versions/node/v18.18.0",TERM_PROGRAM_VERSION:"1.90.0",ZDOTDIR:"/Users/renecardozo",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"1",npm_config_noproxy:"",npm_config_local_prefix:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui",ZSH:"/Users/renecardozo/.oh-my-zsh",NVM_DIR:"/Users/renecardozo/.nvm",USER:"renecardozo",LS_COLORS:"di=1;36:ln=35:so=32:pi=33:ex=31:bd=34;46:cd=34;43:su=30;41:sg=30;46:tw=30;42:ow=30;43",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/Users/renecardozo/.nvm/versions/node/v18.18.0/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.hTpKWX1t96/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/Users/renecardozo/.nvm/versions/node/v18.18.0/lib/node_modules/npm/bin/npm-cli.js",PAGER:"less",LSCOLORS:"Gxfxcxdxbxegedabagacad",PATH:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui/node_modules/.bin:/Users/renecardozo/Documents/TIS/patricia/projects/node_modules/.bin:/Users/renecardozo/Documents/TIS/patricia/node_modules/.bin:/Users/renecardozo/Documents/TIS/node_modules/.bin:/Users/renecardozo/Documents/node_modules/.bin:/Users/renecardozo/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/renecardozo/.nvm/versions/node/v18.18.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/opt/homebrew/opt/postgresql@12/bin:/opt/homebrew/opt/php@7.4/sbin:/opt/homebrew/opt/php@7.4/bin:/opt/homebrew/opt/mongodb-community@7.0/bin/:$/Users/renecardozo/.pyenv/versions/2.7.18/bin/python2.7:/Users/renecardozo/.pyenv/shims:/Users/renecardozo/.nvm/versions/node/v18.18.0/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/share/dotnet:~/.dotnet/tools:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/opt/homebrew/opt/postgresql@12/bin:/opt/homebrew/opt/php@7.4/sbin:/opt/homebrew/opt/php@7.4/bin:/opt/homebrew/opt/mongodb-community@7.0/bin/:$/Users/renecardozo/.pyenv/versions/2.7.18/bin/python2.7:/Users/renecardozo/.nvm/versions/node/v18.18.0/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/mysql-8.0.31-macos12-arm64/bin:/Applications/Visual Studio Code.app/Contents/Resources/app/bin:/usr/local/mysql-8.0.31-macos12-arm64/bin:/Applications/Visual Studio Code.app/Contents/Resources/app/bin",npm_package_json:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui/package.json",_:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui/node_modules/.bin/vite",npm_config_userconfig:"/Users/renecardozo/.npmrc",npm_config_init_module:"/Users/renecardozo/.npm-init.js",USER_ZDOTDIR:"/Users/renecardozo",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui",npm_lifecycle_event:"build",EDITOR:"vi",npm_package_name:"nksoft-ui",LANG:"en_US.UTF-8",npm_config_npm_version:"9.8.1",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",XPC_FLAGS:"0x0",npm_config_node_gyp:"/Users/renecardozo/.nvm/versions/node/v18.18.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"0.1.0",XPC_SERVICE_NAME:"0",VSCODE_INJECTION:"1",PYENV_SHELL:"zsh",SHLVL:"2",HOME:"/Users/renecardozo",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/renecardozo/.npm",LESS:"-R",LOGNAME:"renecardozo",npm_lifecycle_script:"PATH_API=http://nksoft.tis.cs.umss.edu.bo vite build",VSCODE_GIT_IPC_HANDLE:"/var/folders/cm/9dv3lvt54z162scbfz77x_r80000gn/T/vscode-git-b2750e5af1.sock",NVM_BIN:"/Users/renecardozo/.nvm/versions/node/v18.18.0/bin",npm_config_user_agent:"npm/9.8.1 node/v18.18.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",npm_node_execpath:"/Users/renecardozo/.nvm/versions/node/v18.18.0/bin/node",npm_config_prefix:"/Users/renecardozo/.nvm/versions/node/v18.18.0",COLORTERM:"truecolor",NODE_ENV:"production",PATH_API_TEST:"http://nksoft.tis.cs.umss.edu.bo"};const k=async s=>{try{const d=await ee.post(`${de.PATH_API}/api/notificaciones`,s);return await oe(s,"Created",0),d.data}catch(d){throw d}};function be(){const[s,d]=r.useState([]),[a,A]=r.useState(""),[E,N]=r.useState(1),[n,T]=r.useState({value:""}),[h,b]=r.useState({value:""}),[m,v]=r.useState("");r.useState(1);const[x,_]=r.useState(!1),[f,g]=r.useState([]),[p,D]=r.useState([]),U=async()=>{const i=await R.get("api/solicitud");d(i.data)},B=o=>{A(o),_(!x)},Z=async o=>{N(o.id);const t=await R.post("api/recomendacion",o);g(t.data),_(!x)},j=()=>{_(!1),A(""),v(""),b(""),T(""),g([]),D([])},W=async o=>{if(!n.value)return v(a?"Seleccione una opcion":"Campo obligatorio");if(a){let u=`api/solicitud/${a==null?void 0:a.id}`;if(await R.put(u,n),n.value==="Rechazado"){console.log(`Solicitud ID: ${a.id}, Estado: ${n.value}, Motivo: ${h.value}`);const y={id_solicitud:a.id,respuesta:h.value};await k(y)}else{console.log(`Solicitud ID: ${a.id}, Estado: ${n.value}`);var i="Puede Disponer del Aula";const y={id_solicitud:a.id,respuesta:i};await k(y)}j(),U()}else{const u=p.map(Y=>Y.nombreAulas).join(", ");console.log(E),console.log(u),console.log(n.value);var t="Ambientes sugeridos: "+u+". Observacion: "+n.value;await k({id_solicitud:E,respuesta:t}),j(),U()}},M=o=>{T({value:o.target.value})},q=o=>{b({value:o.target.value})},K=async o=>{let i="api/filtro";const t={value:o.target.value},u=await R.post(i,t);d(u.data)},X=()=>{console.log("next")};return console.log(p),r.useEffect(()=>{U()},[]),e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"d-flex mb-5",children:[e.jsx("h3",{className:"me-5",children:"Filtro:"}),e.jsxs(V,{size:"mb",style:{width:"40%"},"aria-label":"Large select example",onChange:K,children:[e.jsx("option",{children:"seleccione un filtro"}),e.jsx("option",{value:"urgencia",children:"Urgencia"}),e.jsx("option",{value:"llegada",children:"Llegada"}),e.jsx("option",{value:"motivo",children:"Motivo"})]})]}),e.jsxs(P,{children:[e.jsx(w,{children:e.jsxs(z,{children:[e.jsx(c,{scope:"col",children:"#"}),e.jsx(c,{scope:"col",children:"Usuario"}),e.jsx(c,{scope:"col",children:"Fecha"}),e.jsx(c,{scope:"col",children:"Periodo"}),e.jsx(c,{scope:"col",children:"Motivo"}),e.jsx(c,{scope:"col",children:"Estado"}),e.jsx(c,{scope:"col",children:"Aula"}),e.jsx(c,{scope:"col",children:"Acciones"})]})}),e.jsx(H,{children:s&&s.map(o=>{var i;return e.jsxs(z,{children:[e.jsx(c,{scope:"row",children:o.id}),e.jsx(l,{children:(i=o.users)==null?void 0:i.name}),e.jsx(l,{children:o.fecha_hora_reserva.split(" ")[0]}),e.jsx(l,{children:e.jsx("ul",{children:o.periodos.map(t=>e.jsx("li",{children:`${t.horaInicio} - ${t.horaFin}`},t.id))})}),e.jsx(l,{children:o.motivo_reserva}),e.jsx(l,{children:o.estado}),e.jsx(l,{children:o.aulas.nombreAulas}),e.jsx(l,{children:o.estado.toLowerCase()==="pendiente"?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"me-2",color:"primary",onClick:()=>B(o),children:e.jsx(F,{icon:te})}),e.jsx(C,{color:"info",onClick:()=>Z(o),children:e.jsx(F,{icon:le})})]}):""})]},o.id)})})]}),e.jsxs(se,{align:"center","aria-label":"Page navigation example",children:[e.jsx(S,{disabled:!0,children:"Previous"}),e.jsx(S,{onClick:X,children:"1"}),e.jsx(S,{children:"2"}),e.jsx(S,{children:"3"}),e.jsx(S,{children:"Next"})]}),e.jsxs(ae,{visible:x,onClose:j,"aria-labelledby":"LiveDemoExampleLabel",backdrop:"static",children:[e.jsx(ne,{onClose:j,children:e.jsx(re,{id:"LiveDemoExampleLabel",children:a?"Actualizar solicitud":"Redactar recomendacion"})}),e.jsx(ie,{children:a?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Usuario : ",a.users.name]}),e.jsxs("p",{children:["Materia : ",a.materia.materia]}),e.jsxs("p",{children:["Motivo : ",a.motivo_reserva]}),e.jsxs("p",{children:["Fecha reserva : ",a.fecha_hora_reserva.split(" ")[0]]}),e.jsxs("p",{children:["Aula : ",a.aulas.nombreAulas]}),e.jsxs("p",{children:["Periodo :"," ",a.periodos.map(o=>e.jsx("p",{children:`${o.horaInicio} - ${o.horaFin}`},o.id))]}),e.jsxs(V,{size:"lg",className:"mb-3","aria-label":"Large select example",onChange:M,children:[e.jsx("option",{children:a.estado}),e.jsx("option",{value:"Aceptado",children:"Aceptado"}),e.jsx("option",{value:"Rechazado",children:"Rechazado"})]}),(n==null?void 0:n.value)==="Rechazado"?e.jsx(I,{id:"floatingTextarea",placeholder:"Escribe el motivo del rechazo",value:h.value,onChange:q}):"",m&&e.jsx("p",{className:"text-danger",children:m})]}):e.jsxs(e.Fragment,{children:[f&&e.jsxs(P,{children:[e.jsx(w,{children:e.jsxs(z,{children:[e.jsx(c,{scope:"col",children:"Aula"}),e.jsx(c,{scope:"col",children:"Capacidad"})]})}),e.jsx(H,{children:f.map(o=>e.jsxs(z,{children:[e.jsx(l,{children:o.nombreAulas}),e.jsx(l,{children:o.capacidadAulas}),e.jsx(l,{children:e.jsx(e.Fragment,{children:p&&!p.find(i=>i.id===o.id)?e.jsx(C,{className:"me-2",color:"primary",onClick:()=>D([...p,o]),children:"Sugerir"}):""})})]},o.id))})]}),e.jsx(I,{id:"floatingTextarea",placeholder:f?"Escribe un comentario":"NO hay aulas disponibles para esa fecha y hora",value:n.value,onChange:M}),m&&e.jsx("p",{className:"text-danger",children:m})]})}),e.jsxs(ce,{children:[e.jsx(C,{color:"secondary",onClick:j,children:"Close"}),e.jsx(C,{color:"primary",onClick:W,children:a?"Guardar":"Enviar"})]})]})]})}export{be as default};

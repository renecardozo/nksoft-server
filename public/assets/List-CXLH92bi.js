import{r,u as y,j as s,a as g,o as l,b as v,d as _,e as E,W as o}from"./index-WtevhoQQ.js";import{G as b}from"./GenericTable-C9yEZx5m.js";import{C as k,a as S,b as U,c as M,d as I}from"./CModalTitle-Dv_Pc0C_.js";import{C as N}from"./CCardHeader-D4DyBJWy.js";function D(){const[d,t]=r.useState(!1),[n,c]=r.useState({}),[u,m]=r.useState([]),x=y(),h=[{id:1,title:"ID",key:"id"},{id:2,title:"Usuario",key:"user",field:e=>(e.user.name||"")+" "+(e.user.last_name||"")},{id:3,title:"Fecha",key:"fecha_reserva"},{id:4,title:"Periodos",key:"periodo",field:e=>e.periodos&&e.periodos.length&&s.jsx("ul",{children:e.periodos.map(a=>s.jsx("li",{children:`${a.horaInicio} - ${a.horaFin}`},a.id))})},{id:5,title:"Motivo",key:"motivo_reserva"},{id:6,title:"Estado",key:"estado"},{id:7,title:"Aula",key:"aula",field:e=>e.aula.nombreAulas}],i=async()=>{let e="api/solicitud_reserva_aula";if(localStorage.getItem("user_data")){const a=JSON.parse(localStorage.getItem("user_data")),j=await o.get(e+"?id_user="+a.id);m(j)}};r.useEffect(()=>{i()},[]);const C=async e=>{x(`/solicitud_reserva_aula/${e.id}/edit`)},p=async()=>{await o.delete(`api/solicitud_reserva_aula/${n.id}`),i(),t(!1)},f=async e=>{c(e),t(!0)};return s.jsxs(g,{children:[s.jsxs(k,{alignment:"center",visible:d,onClose:()=>t(!1),"aria-labelledby":"VerticallyCenteredExample",children:[s.jsx(S,{children:s.jsx(U,{id:"VerticallyCenteredExample",children:"Eliminar Usuario"})}),s.jsx(M,{children:"Esta seguro de eliminar este usuario "}),s.jsxs(I,{children:[s.jsx(l,{color:"secondary",onClick:()=>t(!1),children:"No"}),s.jsx(l,{color:"primary",onClick:()=>p(),children:"Si"})]})]}),s.jsx(v,{xs:12,children:s.jsxs(_,{className:"mb-4 max-height400",children:[s.jsx(N,{children:s.jsx("strong",{children:"Historial de Solicitudes"})}),s.jsx(E,{className:"overflow-auto p-3",children:s.jsx(b,{headers:h,list:u,onEdit:e=>C(e),onDelete:e=>f(e)})})]})})]})}export{D as default};

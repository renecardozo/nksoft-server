import{Q as U,r as t,j as o,d as z,e as I,a5 as O,B as w,D as N,E as u,F as i,H as P,I as d}from"./index-Caj9Gai4.js";/* empty css                         */import{C as M}from"./CCardHeader-B8t4ttuW.js";import{C as _}from"./CFormSelect-BvsJ3WuD.js";var H={PATH_API:"http://nksoft.tis.cs.umss.edu.bo",NVM_INC:"/Users/renecardozo/.nvm/versions/node/v18.18.0/include/node",MANPATH:"/Users/renecardozo/.nvm/versions/node/v18.18.0/share/man:/opt/homebrew/share/man:/usr/share/man:/usr/local/share/man:/Users/renecardozo/.nvm/versions/node/v18.18.0/share/man:/opt/homebrew/share/man::",TERM_PROGRAM:"vscode",NODE:"/Users/renecardozo/.nvm/versions/node/v18.18.0/bin/node",INIT_CWD:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui",NVM_CD_FLAGS:"-q",TERM:"xterm-256color",SHELL:"/bin/zsh",npm_config_metrics_registry:"https://registry.npmjs.org/",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/cm/9dv3lvt54z162scbfz77x_r80000gn/T/",npm_config_global_prefix:"/Users/renecardozo/.nvm/versions/node/v18.18.0",TERM_PROGRAM_VERSION:"1.90.0",ZDOTDIR:"/Users/renecardozo",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"1",npm_config_noproxy:"",npm_config_local_prefix:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui",ZSH:"/Users/renecardozo/.oh-my-zsh",NVM_DIR:"/Users/renecardozo/.nvm",USER:"renecardozo",LS_COLORS:"di=1;36:ln=35:so=32:pi=33:ex=31:bd=34;46:cd=34;43:su=30;41:sg=30;46:tw=30;42:ow=30;43",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/Users/renecardozo/.nvm/versions/node/v18.18.0/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.hTpKWX1t96/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/Users/renecardozo/.nvm/versions/node/v18.18.0/lib/node_modules/npm/bin/npm-cli.js",PAGER:"less",LSCOLORS:"Gxfxcxdxbxegedabagacad",PATH:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui/node_modules/.bin:/Users/renecardozo/Documents/TIS/patricia/projects/node_modules/.bin:/Users/renecardozo/Documents/TIS/patricia/node_modules/.bin:/Users/renecardozo/Documents/TIS/node_modules/.bin:/Users/renecardozo/Documents/node_modules/.bin:/Users/renecardozo/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/renecardozo/.nvm/versions/node/v18.18.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/opt/homebrew/opt/postgresql@12/bin:/opt/homebrew/opt/php@7.4/sbin:/opt/homebrew/opt/php@7.4/bin:/opt/homebrew/opt/mongodb-community@7.0/bin/:$/Users/renecardozo/.pyenv/versions/2.7.18/bin/python2.7:/Users/renecardozo/.pyenv/shims:/Users/renecardozo/.nvm/versions/node/v18.18.0/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/share/dotnet:~/.dotnet/tools:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/opt/homebrew/opt/postgresql@12/bin:/opt/homebrew/opt/php@7.4/sbin:/opt/homebrew/opt/php@7.4/bin:/opt/homebrew/opt/mongodb-community@7.0/bin/:$/Users/renecardozo/.pyenv/versions/2.7.18/bin/python2.7:/Users/renecardozo/.nvm/versions/node/v18.18.0/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/mysql-8.0.31-macos12-arm64/bin:/Applications/Visual Studio Code.app/Contents/Resources/app/bin:/usr/local/mysql-8.0.31-macos12-arm64/bin:/Applications/Visual Studio Code.app/Contents/Resources/app/bin",npm_package_json:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui/package.json",_:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui/node_modules/.bin/vite",npm_config_userconfig:"/Users/renecardozo/.npmrc",npm_config_init_module:"/Users/renecardozo/.npm-init.js",USER_ZDOTDIR:"/Users/renecardozo",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui",npm_lifecycle_event:"build",EDITOR:"vi",npm_package_name:"nksoft-ui",LANG:"en_US.UTF-8",npm_config_npm_version:"9.8.1",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",XPC_FLAGS:"0x0",npm_config_node_gyp:"/Users/renecardozo/.nvm/versions/node/v18.18.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"0.1.0",XPC_SERVICE_NAME:"0",VSCODE_INJECTION:"1",PYENV_SHELL:"zsh",SHLVL:"2",HOME:"/Users/renecardozo",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/renecardozo/.npm",LESS:"-R",LOGNAME:"renecardozo",npm_lifecycle_script:"PATH_API=http://nksoft.tis.cs.umss.edu.bo vite build",VSCODE_GIT_IPC_HANDLE:"/var/folders/cm/9dv3lvt54z162scbfz77x_r80000gn/T/vscode-git-b2750e5af1.sock",NVM_BIN:"/Users/renecardozo/.nvm/versions/node/v18.18.0/bin",npm_config_user_agent:"npm/9.8.1 node/v18.18.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",npm_node_execpath:"/Users/renecardozo/.nvm/versions/node/v18.18.0/bin/node",npm_config_prefix:"/Users/renecardozo/.nvm/versions/node/v18.18.0",COLORTERM:"truecolor",NODE_ENV:"production",PATH_API_TEST:"http://nksoft.tis.cs.umss.edu.bo"};const L=async()=>{try{return(await U.get(`${H.PATH_API}/api/bitacora`,{headers:{Accept:"application/json"}})).data}catch(n){throw console.error("Error al obtener los roles:",n),n}};function B(){const[n,h]=t.useState([]),[b,c]=t.useState([]),[v,p]=t.useState([]),[S,x]=t.useState([]),[C,g]=t.useState(""),[f,A]=t.useState(""),[E,j]=t.useState(null);t.useEffect(()=>{(async()=>{try{const e=await L();console.log("Bitacoras obtenidos:",e),p(Array.isArray(e)?m("role",e.map(r=>({role:r.role,id:r.id}))):[]),x(Array.isArray(e)?m("username",e.map(r=>({username:r.username,id:r.id}))):[]),h(Array.isArray(e)?e:[]),c(Array.isArray(e)?e:[])}catch(e){console.error("Error al obtener los roles:",e),p([])}})()},[]);const m=(s,e)=>{const r=new Map;return e.forEach(a=>{r.has(a[s])||r.set(a[s],a)}),Array.from(r.values())},y=s=>{const e=s.target.value;if(e===""){c([...n]);return}console.log(e),g(e);const r=n.filter(a=>a.username===e);c([...r])},T=s=>{console.log(typeof s.target.value);const e=s.target.value;if(e===""){c([...n]);return}console.log(e),A(e);const r=n.filter(a=>a.role===e);c([...r])},D=s=>{if(s===null){c([...n]);return}console.log(s);const e=new Date(s);j(s);const r=n.filter(a=>{const l=new Date(a.timestamp);return l.getMonth()===e.getMonth()&&l.getFullYear()===e.getFullYear()&&l.getDate()===e.getDate()});c([...r])},R=s=>{const e=new Date(s);return`${e.toLocaleDateString()} ${e.toLocaleTimeString()}`};return o.jsx("div",{className:"container",children:o.jsxs(z,{children:[o.jsx(M,{children:o.jsx("h4",{children:"BitÃ¡cora"})}),o.jsxs(I,{children:[o.jsxs("div",{className:"row align-items-center",children:[o.jsx("div",{className:"col-md-4 mb-3",children:o.jsxs(_,{value:C,onChange:y,children:[o.jsx("option",{value:"",children:"Usuario"}),S.map((s,e)=>o.jsx("option",{value:s.username,children:s.username},e))]})}),o.jsx("div",{className:"col-md-4 mb-3",children:o.jsxs(_,{value:f,onChange:T,children:[o.jsx("option",{value:"",children:"Role"}),v.map((s,e)=>o.jsx("option",{value:s.role,children:s.role},e))]})}),o.jsx("div",{className:"col-md-4 mb-3",children:o.jsx(O,{className:"form-control",selected:E,onChange:D,dateFormat:"yyyy-MM-dd",placeholderText:"Fecha",maxDate:new Date})})]}),o.jsx("div",{className:"table-responsive",children:o.jsxs(w,{bordered:!0,hover:!0,children:[o.jsx(N,{children:o.jsxs(u,{children:[o.jsx(i,{children:"Fecha"}),o.jsx(i,{children:"Usuario"}),o.jsx(i,{children:"Email"}),o.jsx(i,{children:"Role"}),o.jsx(i,{children:"Id Resource"}),o.jsx(i,{children:"Resource"}),o.jsx(i,{children:"Accion"})]})}),o.jsx(P,{children:b.map((s,e)=>o.jsxs(u,{children:[o.jsx(d,{children:R(s.timestamp)}),o.jsx(d,{children:s.username}),o.jsx(d,{children:s.email}),o.jsx(d,{children:s.role}),o.jsx(d,{children:s.id_resource}),o.jsx(d,{children:s.name_resource}),o.jsx(d,{children:s.actions})]},e))})]})})]})]})})}export{B as default};

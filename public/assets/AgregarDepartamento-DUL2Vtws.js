import{Q as D,r as s,u as U,j as e,C as y,d as N,a as m,b as t,o as E,e as x,f as P,l as M,B as L,D as H,E as f,F as l,H as F,I as k,n as c,q as V}from"./index-WtevhoQQ.js";import{C as G}from"./CCardHeader-D4DyBJWy.js";var T={NVM_INC:"/Users/renecardozo/.nvm/versions/node/v18.18.0/include/node",MANPATH:"/Users/renecardozo/.nvm/versions/node/v18.18.0/share/man:/opt/homebrew/share/man:/usr/share/man:/usr/local/share/man:/Users/renecardozo/.nvm/versions/node/v18.18.0/share/man:/opt/homebrew/share/man::",TERM_PROGRAM:"vscode",NODE:"/Users/renecardozo/.nvm/versions/node/v18.18.0/bin/node",INIT_CWD:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui",NVM_CD_FLAGS:"-q",SHELL:"/bin/zsh",TERM:"xterm-256color",npm_config_metrics_registry:"https://registry.npmjs.org/",TMPDIR:"/var/folders/cm/9dv3lvt54z162scbfz77x_r80000gn/T/",HOMEBREW_REPOSITORY:"/opt/homebrew",npm_config_global_prefix:"/Users/renecardozo/.nvm/versions/node/v18.18.0",TERM_PROGRAM_VERSION:"1.90.0",ZDOTDIR:"/Users/renecardozo",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"1",TERM_SESSION_ID:"w0t1p0:1935E2A4-F1BE-4BF2-B704-E82CDF45E77D",npm_config_noproxy:"",npm_config_local_prefix:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui",ZSH:"/Users/renecardozo/.oh-my-zsh",USER:"renecardozo",NVM_DIR:"/Users/renecardozo/.nvm",LS_COLORS:"di=1;36:ln=35:so=32:pi=33:ex=31:bd=34;46:cd=34;43:su=30;41:sg=30;46:tw=30;42:ow=30;43",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/Users/renecardozo/.nvm/versions/node/v18.18.0/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.5Xx8k0d5J8/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/Users/renecardozo/.nvm/versions/node/v18.18.0/lib/node_modules/npm/bin/npm-cli.js",PAGER:"less",LSCOLORS:"Gxfxcxdxbxegedabagacad",PATH:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui/node_modules/.bin:/Users/renecardozo/Documents/TIS/patricia/projects/node_modules/.bin:/Users/renecardozo/Documents/TIS/patricia/node_modules/.bin:/Users/renecardozo/Documents/TIS/node_modules/.bin:/Users/renecardozo/Documents/node_modules/.bin:/Users/renecardozo/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/renecardozo/.nvm/versions/node/v18.18.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/opt/homebrew/opt/postgresql@12/bin:/opt/homebrew/opt/php@8.2/sbin:/opt/homebrew/opt/php@8.2/bin:/opt/homebrew/opt/mongodb-community@7.0/bin/:$/Users/renecardozo/.pyenv/versions/2.7.18/bin/python2.7:/Users/renecardozo/.pyenv/shims:/Users/renecardozo/.nvm/versions/node/v18.18.0/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/share/dotnet:~/.dotnet/tools:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/opt/homebrew/opt/postgresql@12/bin:/opt/homebrew/opt/php@7.4/sbin:/opt/homebrew/opt/php@7.4/bin:/opt/homebrew/opt/mongodb-community@7.0/bin/:$/Users/renecardozo/.pyenv/versions/2.7.18/bin/python2.7:/Users/renecardozo/.nvm/versions/node/v18.18.0/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/mysql-8.0.31-macos12-arm64/bin:/Applications/Visual Studio Code.app/Contents/Resources/app/bin:/usr/local/mysql-8.0.31-macos12-arm64/bin:/Applications/Visual Studio Code.app/Contents/Resources/app/bin",npm_package_json:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui/package.json",_:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui/node_modules/.bin/cross-env",npm_config_userconfig:"/Users/renecardozo/.npmrc",npm_config_init_module:"/Users/renecardozo/.npm-init.js",USER_ZDOTDIR:"/Users/renecardozo",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/renecardozo/Documents/TIS/patricia/projects/nksoft-ui",npm_lifecycle_event:"build",EDITOR:"vi",npm_package_name:"nksoft-ui",LANG:"en_US.UTF-8",ITERM_PROFILE:"Default",npm_config_npm_version:"9.8.1",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",XPC_FLAGS:"0x0",npm_config_node_gyp:"/Users/renecardozo/.nvm/versions/node/v18.18.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"0.1.0",XPC_SERVICE_NAME:"0",VSCODE_INJECTION:"1",COLORFGBG:"7;0",HOME:"/Users/renecardozo",SHLVL:"4",PYENV_SHELL:"zsh",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",LC_TERMINAL_VERSION:"3.4.18",HOMEBREW_PREFIX:"/opt/homebrew",ITERM_SESSION_ID:"w0t1p0:1935E2A4-F1BE-4BF2-B704-E82CDF45E77D",npm_config_cache:"/Users/renecardozo/.npm",LESS:"-R",LOGNAME:"renecardozo",npm_lifecycle_script:"cross-env PATH_API=http://newknowledge.tis.cs.umss.edu.bo vite build",VSCODE_GIT_IPC_HANDLE:"/var/folders/cm/9dv3lvt54z162scbfz77x_r80000gn/T/vscode-git-b2750e5af1.sock",LC_CTYPE:"UTF-8",NVM_BIN:"/Users/renecardozo/.nvm/versions/node/v18.18.0/bin",npm_config_user_agent:"npm/9.8.1 node/v18.18.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:",LC_TERMINAL:"iTerm2",npm_node_execpath:"/Users/renecardozo/.nvm/versions/node/v18.18.0/bin/node",npm_config_prefix:"/Users/renecardozo/.nvm/versions/node/v18.18.0",COLORTERM:"truecolor",PATH_API:"http://newknowledge.tis.cs.umss.edu.bo",NODE_ENV:"production",PATH_API_TEST:"http://nksoft.tis.cs.umss.edu.bo"};const B=async r=>(await D.post(`${T.PATH_API}/api/departamentos`,r)).data,g=async()=>{try{return(await D.get(`${T.PATH_API}/api/departamentos`)).data.sort((i,d)=>i.nombreDepartamentos.localeCompare(d.nombreDepartamentos))}catch(r){throw console.error("Error al obtener los departamentos:",r),r}};function K(){const[r,p]=s.useState([]),[n,i]=s.useState(""),[d,u]=s.useState(!1),[I,_]=s.useState(!1),[R,b]=s.useState(!1),[w,h]=s.useState(!1),[A,v]=s.useState(!1);U();const S=async()=>{const o=await g();p(o)};s.useEffect(()=>{S()},[]);const j=async o=>{if(o.preventDefault(),n.trim()===""){v(!0),setTimeout(()=>{v(!1)},3e3);return}try{if((await g()).find(z=>z.nombreDepartamentos===n)){b(!0);return}const C={nombreDepartamentos:n};await B(C),await V(C,"Created",0),alert("Departamento registrado con éxito"),_(!0),await S(),i(""),u(!1)}catch(a){h(!0),console.error("Error al guardar el departamento:",a)}finally{setTimeout(()=>{_(!1),b(!1),h(!1)},3e3)}},O=()=>{u(!0)};return e.jsx(y,{className:"px-4",children:e.jsxs(N,{className:"mb-4",children:[e.jsx(G,{children:e.jsxs(m,{children:[e.jsx(t,{children:e.jsx("h3",{children:"Departamentos"})}),e.jsx(t,{xs:"auto",className:"ml-auto",children:e.jsx(E,{color:"primary",onClick:O,children:"Agregar Departamento"})})]})}),d&&e.jsx(x,{children:e.jsx(P,{children:e.jsxs(m,{className:"mb-3",children:[e.jsx(t,{children:e.jsx(M,{placeholder:"Nombre",autoComplete:"nombre",value:n,onChange:o=>i(o.target.value)})}),e.jsx(t,{xs:"auto",children:e.jsx(E,{color:"primary",onClick:o=>j(o),children:"Registrar"})})]})})}),e.jsx(x,{children:e.jsxs(L,{striped:!0,bordered:!0,responsive:!0,children:[e.jsx(H,{children:e.jsxs(f,{children:[e.jsx(l,{scope:"col",children:"No"}),e.jsx(l,{scope:"col",children:"Nombre"})]})}),e.jsx(F,{children:r.map((o,a)=>e.jsxs(f,{children:[e.jsx(l,{scope:"row",children:a+1}),e.jsx(k,{children:o.nombreDepartamentos})]},a))})]})}),e.jsx(m,{children:e.jsxs(t,{children:[I&&e.jsx(c,{color:"success",children:"Departamento registrado con éxito"}),R&&e.jsx(c,{color:"warning",children:"El nombre del departamento ya está en uso. Por favor, ingrese otro nombre."}),w&&e.jsx(c,{color:"danger",children:"Ocurrió un error al intentar guardar el departamento. Por favor, inténtelo de nuevo."}),A&&e.jsx(c,{color:"warning",children:"Por favor, ingrese un nombre para el departamento."})]})})]})})}export{K as default};
